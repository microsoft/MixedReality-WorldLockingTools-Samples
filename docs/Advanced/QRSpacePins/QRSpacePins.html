<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>QR Space Pins sample | World Locking Tools Samples Documentation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="QR Space Pins sample | World Locking Tools Samples Documentation ">
    <meta name="generator" content="docfx 2.53.1.0">
    
    <link rel="shortcut icon" href="../../DocGen/Images/Logos/favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../../DocGen/Documentation/toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../DocGen/Images/Logos/WLS64.png" alt="">
              </a>
            </div>
          
          <div class="version-dropdown" id="versionDropdown">
           </div>
         
          <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="qr-space-pins-sample">QR Space Pins sample</h1>

<h2 id="summary">Summary</h2>
<p>The Space Pins feature of World Locking Tools is combined with QR code scanning to provide automatic snapping of a Unity scene to a physical environment. As the QR codes are physical features, this is an intrinsically shared experience.</p>
<p><img src="../../DocGen/Images/Screens/QRScanCabinet.jpg" alt=""></p>
<p>See also the <a href="https://youtu.be/OjmR2KfVUn8">accompanying video</a> for some visual clarification.</p>
<h2 id="project-source-assets">Project source assets</h2>
<p><a href="https://github.com/microsoft/MixedReality-WorldLockingTools-Samples/tree/master/Advanced/QRSpacePins">https://github.com/microsoft/MixedReality-WorldLockingTools-Samples/tree/master/Advanced/QRSpacePins</a></p>
<h2 id="dependencies">Dependencies</h2>
<ul>
<li>Built on WLT v1.3.4.</li>
<li>Built with MRTK v2.6.1.</li>
<li>QR code from NuGet package 0.5.2112.</li>
<li>VCRTForwarders.140 (QR code dependency) from NuGet package 1.0.7.</li>
<li>Built with Unity 2019.4.2f1.</li>
</ul>
<p>Requires <strong>HoloLens2</strong> for QR code scanning.</p>
<h2 id="additional-setup">Additional setup</h2>
<p>The QR code placement in the physical environment should match the QR code placement within the scene. For the virtual markers, look at objects &quot;HouseHold &gt; BarnMarkers &gt; Markers &gt; QRCode_N&quot;, where N is the integers 1 through 4.</p>
<p>For example, consider the following configuration.</p>
<h3 id="unity-scene">Unity scene</h3>
<p>The position of QRCode_1 is (0,0,0), and its orientation is horizontal with the top pointed along positive X.</p>
<h3 id="physical-environment">Physical environment</h3>
<p>The printed QR code is at your feet, with the top pointed north.</p>
<h3 id="result">Result</h3>
<p>The Unity scene will appear with the origin at your feet, and the positive X axis pointed north.</p>
<h2 id="running-the-sample">Running the sample</h2>
<p>Deploy the scene QRSpacePins.unity and start the application. Scan your printed QR codes by walking to them. The smaller the printed QR code the closer you'll need to get to it to scan it. A 5x5cm printed code will need to be within about 20 cm to scan.</p>
<p>The codes can be scanned in any order.</p>
<p>The scanned codes can be cleared at any time with the voice command &quot;Clear Space Pins&quot;. You can then start over scanning.</p>
<h3 id="the-2nd-scene">The 2nd scene</h3>
<p>QRSubScene is identical to QRSpacePins, with one significant exception. Whereas QRSpacePins aligns the entire Unity coordinate space to put the virtual QR codes at the physical QR markers, QRSubScene applies that transformation only to the root of the Household subtree of the scene graph.</p>
<p>It accomplishes this using the AlignSubtree script placed on the Household node. See the <a href="../AlignSubScene/AlignSubScene.html">AlignSubScene sample</a>, which explores alignment of independent coordinate spaces with the physical world in greater detail. For further details on the AlignSubtree script, consult the <a href="https://microsoft.github.io/MixedReality-WorldLockingTools-Unity/DocGen/Temp/api/Microsoft.MixedReality.WorldLocking.Examples.AlignSubtree.html?q=alignsubtree">World Locking Tools for Unity documentation</a>.</p>
<h2 id="special-controls">Special controls</h2>
<h3 id="speech-commands">Speech commands</h3>
<table>
<thead>
<tr>
<th>Command</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr>
<td>Clear Space Pins</td>
<td>Resets all QR codes and pins to startup</td>
</tr>
<tr>
<td>Toggle World Lock</td>
<td>Toggles whether the World Locking Tools are active</td>
</tr>
</tbody>
</table>
<h2 id="known-issues">Known issues</h2>
<h3 id="no-qr-codes-scanned-on-first-run">No QR codes scanned on first run</h3>
<p>The first time running the application after initial deployment, the enumeration of the QR watcher never completes. This means no QR codes are ever scanned.</p>
<p>Closing the application and running a second time fixes the problem, and the 2nd run and thereafter QR codes scan fine.</p>
<p>This is probably an issue with the permissions setup on the first run, but since it is a QR scanning issue, and not related to world-locking, it hasn't been a priority to track down. Tracked as <a href="https://github.com/microsoft/MixedReality-WorldLockingTools-Samples/issues/20">issue #20</a>.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/Microsoft/MixedReality-WorldLockingTools-Samples/blob/master/Advanced/QRSpacePins/QRSpacePins.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
